# Curve tool to generate Swap parameters

Reference from:

- https://github.com/stablyio/curve-params-generator/tree/df2f8c4af918c0e2a2bf163558c0dc5482d4737e

- https://github.com/curvefi/curve-js

## Installation

```bash
yarn
```

## Usage

### CLI

```bash
yarn cli <tokenIn> <tokenOut> <amountIn> <network>
```

Supported networks:

- `ethereum_mainnet`
- `fraxtal_testnet`
- `fraxtal_mainnet`

Example:

Query on ethereum mainnet:

```bash
yarn cli DAI USDC 1000 ethereum_mainnet
```

Query on fraxtal testnet:

```bash
yarn cli dUSD sFRAX 1 fraxtal_testnet
```

Query with address:

```bash
yarn cli 0x6b175474e89094c44da98b954eedeac495271d0f 0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48 1000 ethereum_mainnet
```

### HTTP Server

Start the server:

```bash
yarn start
```

Make POST requests to `/get-best-route-args` endpoint with the following payload:

```json
{
  "inputTokenAddress": "0x6b175474e89094c44da98b954eedeac495271d0f",
  "outputTokenAddress": "0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",
  "inputAmount": "1000",
  "network": "ethereum_mainnet"
}
```

Example Response:

```json
{
  "_route": [
    "0x6b175474e89094c44da98b954eedeac495271d0f",
    "0xbebc44782c7db0a1a60cb6fe97d0b483032ff1c7",
    "0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000"
  ],
  "_swapParams": [
    [ 0, 1, 1, 1, 3 ],
    [ 0, 0, 0, 0, 0 ],
    [ 0, 0, 0, 0, 0 ],
    [ 0, 0, 0, 0, 0 ],
    [ 0, 0, 0, 0, 0 ]
  ],
  "_pools": [
    "0xbebc44782c7db0a1a60cb6fe97d0b483032ff1c7",
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000"
  ],
  "_basePools": [
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000"
  ],
  "_baseTokens": [
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000"
  ],
  "_secondBasePools": [
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000"
  ],
  "_secondBaseTokens": [
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000",
    "0x0000000000000000000000000000000000000000"
  ]
}
```

## Docker

Build the image:

```bash
docker build -t curve-tools .
```

Run with Docker:

```bash
docker run curve-tools yarn cli <tokenIn> <tokenOut> <amountIn> <network>
```

Example:

```bash
# With token symbols
docker run curve-tools yarn cli DAI USDC 1000 ethereum_mainnet

# With address
docker run curve-tools yarn cli 0x6b175474e89094c44da98b954eedeac495271d0f 0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48 1000 ethereum_mainnet
```
