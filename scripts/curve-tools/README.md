# Curve tool to generate Swap parameters

Reference from:

- https://github.com/stablyio/curve-params-generator/tree/df2f8c4af918c0e2a2bf163558c0dc5482d4737e

- https://github.com/curvefi/curve-js

## Installation

```bash
yarn
```

## Usage

```bash
yarn tsx src/main.ts <tokenIn> <tokenOut> <amountIn> <isFraxtalTestnet>
```

Example:

Query on ethereum mainnet:

```bash
yarn tsx src/main.ts DAI USDC 1000 false
```

Output:

```text
CURVE-JS IS CONNECTED TO NETWORK: { name: 'MAINNET', chainId: 1 }
Curve has router:  true
Read 1239 pools 14ms, routerGraph: 948 items
Route:  [
  {
    poolId: '3pool',
    swapAddress: '0xbebc44782c7db0a1a60cb6fe97d0b483032ff1c7',
    inputCoinAddress: '0x6b175474e89094c44da98b954eedeac495271d0f',
    outputCoinAddress: '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',
    swapParams: [ 0, 1, 1, 1, 3 ],
    poolAddress: '0xbebc44782c7db0a1a60cb6fe97d0b483032ff1c7',
    basePool: '0x0000000000000000000000000000000000000000',
    baseToken: '0x0000000000000000000000000000000000000000',
    secondBasePool: '0x0000000000000000000000000000000000000000',
    secondBaseToken: '0x0000000000000000000000000000000000000000',
    tvl: 317810205907.73987
  }
]
Output:  999.897109
Args:  {
  _route: [
    '0x6b175474e89094c44da98b954eedeac495271d0f',
    '0xbebc44782c7db0a1a60cb6fe97d0b483032ff1c7',
    '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000'
  ],
  _swapParams: [
    [ 0, 1, 1, 1, 3 ],
    [ 0, 0, 0, 0, 0 ],
    [ 0, 0, 0, 0, 0 ],
    [ 0, 0, 0, 0, 0 ],
    [ 0, 0, 0, 0, 0 ]
  ],
  _pools: [
    '0xbebc44782c7db0a1a60cb6fe97d0b483032ff1c7',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000'
  ],
  _basePools: [
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000'
  ],
  _baseTokens: [
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000'
  ],
  _secondBasePools: [
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000'
  ],
  _secondBaseTokens: [
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000'
  ]
}
```

Query on fraxtal testnet:

```bash
yarn tsx src/main.ts dUSD sFRAX 1 true
```

Output:

```text
CURVE-JS IS CONNECTED TO NETWORK: { name: 'UNKNOWN', chainId: 2522 }
Curve has router:  true
dTrinity_dUSD_FXS Cannot read properties of undefined (reading 'filter')
dTrinity_dUSD_FRAX Cannot read properties of undefined (reading 'filter')
dTrinity_FRAX_sFRAX Cannot read properties of undefined (reading 'filter')
Read 3 pools 1ms, routerGraph: 9 items
Route:  [
  {
    poolId: 'dTrinity_dUSD_FRAX',
    swapAddress: '0x93f785642837e082ff95bb69e64e5b6967857c74',
    inputCoinAddress: '0x4d6e79013212f10a026a1fb0b926c9fd0432b96c',
    outputCoinAddress: '0x2cab811d351b4ef492d8c197e09939f1c9f54330',
    swapParams: [ 0, 1, 1, 2, 2 ],
    poolAddress: '0x93f785642837e082ff95bb69e64e5b6967857c74',
    basePool: '0x0000000000000000000000000000000000000000',
    baseToken: '0x0000000000000000000000000000000000000000',
    secondBasePool: '0x0000000000000000000000000000000000000000',
    secondBaseToken: '0x0000000000000000000000000000000000000000',
    tvl: 1000000.00005
  },
  {
    poolId: 'dTrinity_FRAX_sFRAX',
    swapAddress: '0x6a7173ea306983f3721cc9a3c6ea7f0a3a2f3c13',
    inputCoinAddress: '0x2cab811d351b4ef492d8c197e09939f1c9f54330',
    outputCoinAddress: '0x0dbf64462fec588df32fc5c9941421f7d93e0fb3',
    swapParams: [ 0, 1, 1, 2, 2 ],
    poolAddress: '0x6a7173ea306983f3721cc9a3c6ea7f0a3a2f3c13',
    basePool: '0x0000000000000000000000000000000000000000',
    baseToken: '0x0000000000000000000000000000000000000000',
    secondBasePool: '0x0000000000000000000000000000000000000000',
    secondBaseToken: '0x0000000000000000000000000000000000000000',
    tvl: 1105000
  }
]
Output:  1.000087773435000743
Args:  {
  _route: [
    '0x4d6e79013212f10a026a1fb0b926c9fd0432b96c',
    '0x93f785642837e082ff95bb69e64e5b6967857c74',
    '0x2cab811d351b4ef492d8c197e09939f1c9f54330',
    '0x6a7173ea306983f3721cc9a3c6ea7f0a3a2f3c13',
    '0x0dbf64462fec588df32fc5c9941421f7d93e0fb3',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000',
    '0x0000000000000000000000000000000000000000'
  ],
  _swapParams: [
    [ 0, 1, 1, 2 ],
    [ 0, 1, 1, 2 ],
    [ 0, 0, 0, 0 ],
    [ 0, 0, 0, 0 ],
    [ 0, 0, 0, 0 ]
  ]
}
```
